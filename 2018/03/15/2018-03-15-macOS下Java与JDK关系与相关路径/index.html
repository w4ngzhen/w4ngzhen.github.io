<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>macOS下Java与JDK关系与相关路径 | CompileMind</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="macOS,JAVAHOME," />
  

  <meta name="description" content="macOS下的Java与JDK的路径曾经困扰过我一段时间，今天稍有些忘记，故记下笔记，整理一下。Java与JDK的关系不在本文笔记之内，Javaer常识。 偏好设置中的Java 在偏好设置中的Java是浏览器的插件，仅提供Java运行环境，其目录我们通过点击该Java图标，进入Java控制面板 —— Java —— 查看，可以显示对应的目录，本人的Java已经升级到了1.8_161，目录如下： 1">
<meta property="og:type" content="article">
<meta property="og:title" content="macOS下Java与JDK关系与相关路径">
<meta property="og:url" content="http://compilemind.com/2018/03/15/2018-03-15-macOS%E4%B8%8BJava%E4%B8%8EJDK%E5%85%B3%E7%B3%BB%E4%B8%8E%E7%9B%B8%E5%85%B3%E8%B7%AF%E5%BE%84/index.html">
<meta property="og:site_name" content="CompileMind">
<meta property="og:description" content="macOS下的Java与JDK的路径曾经困扰过我一段时间，今天稍有些忘记，故记下笔记，整理一下。Java与JDK的关系不在本文笔记之内，Javaer常识。 偏好设置中的Java 在偏好设置中的Java是浏览器的插件，仅提供Java运行环境，其目录我们通过点击该Java图标，进入Java控制面板 —— Java —— 查看，可以显示对应的目录，本人的Java已经升级到了1.8_161，目录如下： 1">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2018-03-14T16:00:00.000Z">
<meta property="article:modified_time" content="2020-08-24T11:05:26.468Z">
<meta property="article:author" content="w4ngzhen">
<meta property="article:tag" content="macOS">
<meta property="article:tag" content="JAVAHOME">
<meta name="twitter:card" content="summary">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbeddx" rel="stylesheet">


  

  
    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

<meta name="generator" content="Hexo 5.1.0"></head>

<body>


  

  <div class="post-header">
   

</div>




<div class="content content-post CENTER">
   <article id="post-2018-03-15-macOS下Java与JDK关系与相关路径" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">macOS下Java与JDK关系与相关路径</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2018.03.15</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>w4ngzhen</span>
        </span>
      

      


      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      
      
    </div>
  </header>

  <div class="article-content">
    
      <p>macOS下的Java与JDK的路径曾经困扰过我一段时间，今天稍有些忘记，故记下笔记，整理一下。Java与JDK的关系不在本文笔记之内，Javaer常识。</p>
<p><strong>偏好设置中的Java</strong></p>
<p>在偏好设置中的Java是浏览器的插件，仅提供Java运行环境，其目录我们通过点击该Java图标，进入Java控制面板 —— Java —— 查看，可以显示对应的目录，本人的Java已经升级到了1.8_161，目录如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;Library&#x2F;Internet Plug-Ins&#x2F;JavaAppletPlugin.plugin&#x2F;Contents&#x2F;Home&#x2F;bin&#x2F;java</span><br></pre></td></tr></table></figure>
<p>通过/Library/Internet\ Plug-Ins目录名称我们也可以知道这个Java是作为网络相关（如浏览器）的Applet插件的。再次强调，这个目录下的Java<strong>仅仅</strong>提供Java基础运行环境，进入bin中我们可以看到<strong>并没有</strong>javac，也可以说明这一点。</p>
<p>所以，我们完全可以删除Internet  Plug-Ins文件夹下的JavaAppletPlugin.plugin这个文件夹，并且同时为了删除偏好设置中的图标，需要删除/Library/PreferencesPanes/JavaControlPanel.prefPane这个文件夹，看文件夹名不难理解。（理论上是这样的，但是没有必要删除）</p>
<p><strong>通过oracle安装的jdk</strong></p>
<p>当我们安装了oracle的jdk之后，我们在命令行中输入which java，通常会显示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;usr&#x2F;bin&#x2F;java</span><br></pre></td></tr></table></figure>
<p>进入/usr/bin中，查看该目录下java的详细信息，可以看到如下的信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls -l java</span></span><br><span class="line">lrwxr-xr-x  1 root  wheel  74 11 11 15:08 java -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java</span><br></pre></td></tr></table></figure>
<p>可以看到这里的java是一个软链接，链接到上述输出目录中。我们进入到<strong>Versions</strong>目录中，这里我们只安装了一个版本的jdk，所以只会有如下的显示信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">drwxr-xr-x  8 root  wheel  256  1 24 22:01 A</span><br><span class="line">lrwxr-xr-x  1 root  wheel    1 11 11 15:05 Current -&gt; A</span><br></pre></td></tr></table></figure>
<p>可以看到，Current也只是一个软链接，链接到该目录下的A文件夹（这样的好处是装了多个版本java后，可以方便地调整Current指向，使得不同版本java变成系统默认的）</p>
<p>我们可以看到，实际上这里面也还不是真正的jdk目录，A文件夹是安装java后系统生成的。它里面的Commands文件夹下有个java可执行文件，然而，我们可以看到这个目录下结构明显不是正常的jdk的目录结构，我们会发下这个目录下有一个java_home，使用如下命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./java_home -V</span><br><span class="line"><span class="meta">#</span><span class="bash"> output</span></span><br><span class="line">Matching Java Virtual Machines (1):</span><br><span class="line">    1.8.0_121, x86_64:	&quot;Java SE 8&quot;	/Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home</span><br></pre></td></tr></table></figure>
<p>上面是我机器上的输出，这个输出才是真正的jdk目录。所以在我看来，oracle安装过程应该是如下流程的：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1.首先解压完整的JDK到</span><br><span class="line">/Library/Java/JavaVirtualMachines/jdk&#123;version&#125;.jdk/Content/Home</span><br><span class="line"></span><br><span class="line">2.在/System/Library/Frameworks/JavaVM.framework/Versions/目录中</span><br><span class="line"></span><br><span class="line">  1)创建对应的A或者其他版本的文件夹（猜测是不同的JDK版本依次B、C、D之类的）</span><br><span class="line"></span><br><span class="line">  2)创建Current文件夹（已存在就忽略）并软链接到A或其他版本的文件夹上</span><br><span class="line"><span class="meta">#</span><span class="bash"> 从A中的Commands文件夹内容本人认为，这个文件夹就是用来协调jdk相关的资源的，比如java与javac，而这里面的java、javac一类的命令会去调用第一步中对应版本的jdk目录中的java、javac</span></span><br><span class="line">3.将/usr/bin下的java、javac、javadoc等软链接到第二步中对应的bin上</span><br><span class="line">ls -l /usr/bin/java*</span><br><span class="line">lrwxr-xr-x  1 root  wheel  74 11 11 15:08 /usr/bin/java -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java</span><br><span class="line">lrwxr-xr-x  1 root  wheel  75 11 11 15:08 /usr/bin/javac -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/javac</span><br><span class="line">lrwxr-xr-x  1 root  wheel  77 11 11 15:08 /usr/bin/javadoc -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/javadoc</span><br><span class="line">lrwxr-xr-x  1 root  wheel  75 11 11 15:08 /usr/bin/javah -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/javah</span><br><span class="line">lrwxr-xr-x  1 root  wheel  75 11 11 15:08 /usr/bin/javap -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/javap</span><br><span class="line">lrwxr-xr-x  1 root  wheel  82 11 11 15:08 /usr/bin/javapackager -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/javapackager</span><br><span class="line">lrwxr-xr-x  1 root  wheel  76 11 11 15:08 /usr/bin/javaws -&gt; /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/javaws</span><br></pre></td></tr></table></figure>
<p>根据上面的常识，我们也完全可以卸载oracle安装的Java，同时，我们可以将真正的Java目录提取出来，放置到我们需要的地方，通过设置环境变量的方式来设置JAVA_HOME。</p>

    
  </div>

</article>

</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

</body>
</html>
